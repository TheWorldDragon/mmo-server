# 游戏协议

~~分为JSON协议和字节协议~~

### command文件夹

描述了服务器与客户端的通信流程，严格遵守客户端向服务器发送一个command文件夹下json包，服务器返回一个对应的json包。

注意：json传输中应该忽略任何不可打印字符

### major-tasks文件夹

   描述了所有的主线任务（主线任务必须只能有一个，且遵循完成此次主线任务后，主线任务变为对应id号+1的下一个主线任务）主线任务的进行状态在对应json对象下得以描述，并提供给get-initial-massage命令，使得get-initial-massage命令被调用时，被前端获取。

### 游戏登录流程

1.获取当前最新的客户端版本号，如果进行对比后发现不是最新版本，应使用get-update-packet命令，进行获取返回包，并更新。如果客户端被破解（虽然不容易）

，那么用户就应承担使用旧版客户端进行网络通信带来的后果（无bug情况下），客户端使用的所有命令不可能作弊。使用旧版客户端反而会因为协议不正确，而突然断开连接。

2.注册账号（可以忽略）

3.登录

4.获取初始信息

##### 本次协议更新想说的话1

    我认为字节并不好掌控(尤其是对于x86架构和arm架构大端小端的差异)，更为明智的选择是对字符协议的压缩，因此删除了字节协议。此外增加了select-role命令和get-initial-massage命令。

协议压缩细节：command改为cmd，删除version(客户端会被强制更新，所以不需要)

下次可能的更新：增加
